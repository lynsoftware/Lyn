@inject IStringLocalizer<Localization> Localizer
@inject NavigationManager Navigation


<header class="app-header">
    <div class="header-content">
        <div class="header-left">
            <a href="/" style="cursor: pointer;">
                <img src="@LogoPath" alt="@LogoAlt" class="header-logo" />
            </a>
        </div>

        <div class="header-center">
            <h1 class="header-title">@Title</h1>
            <p class="header-subtitle">@Subtitle</p>
        </div>

        <div class="header-right">
            <button type="button"
                    class="menu-button"
                    @onclick="ToggleMenu"
                    aria-label="@Localizer["Header_ToggleMenu_AriaLabel"]"
                    aria-expanded="@(!_isMenuCollapsed)">
                ☰
            </button>
        </div>
    </div>

    <!-- Slide-in meny -->
    <div class="@MenuCssClass" @onclick="ToggleMenu">
        <nav class="side-menu" @onclick:stopPropagation="true">
            <div class="menu-header">
                <h2>@Localizer["Header_Navigation"]</h2>
                <button type="button"
                        class="close-button"
                        @onclick="ToggleMenu"
                        aria-label="@Localizer["Header_CloseMenu_AriaLabel"]">
                    ✕
                </button>
            </div>

            <div class="menu-items">
                <NavLink class="menu-link" href="" Match="NavLinkMatch.All" @onclick="CloseMenu">
                    <span class="menu-icon">
                        <i class="bi bi-house-door-fill"></i>
                    </span>
                    <span>@Localizer["Header_Menu_Home"]</span>
                </NavLink>

                <NavLink class="menu-link" href="passwordgenerator" @onclick="CloseMenu">
                    <span class="menu-icon">
                        <img src="/images/logo.png" alt="" class="menu-logo" />
                    </span>
                    <span>@Localizer["Header_Menu_PasswordGenerator"]</span>
                </NavLink>

                <NavLink class="menu-link" href="download" @onclick="CloseMenu">
                    <span class="menu-icon">
                        <i class="bi bi-download"></i>
                    </span>
                    <span>@Localizer["Header_Menu_Download"]</span>
                </NavLink>

                <NavLink class="menu-link" href="settings" @onclick="CloseMenu">
                    <span class="menu-icon">
                        <i class="bi bi-gear-fill"></i>
                    </span>
                    <span>@Localizer["Header_Menu_Settings"]</span>
                </NavLink>

                <NavLink class="menu-link" href="about" @onclick="CloseMenu">
                    <span class="menu-icon">
                        <i class="bi bi-info-circle-fill"></i>
                    </span>
                    <span>@Localizer["Header_Menu_About"]</span>
                </NavLink>

                <NavLink class="menu-link" href="/testing" @onclick="CloseMenu">
                    <span class="menu-icon">
                        <i class="bi bi-flask menu-icon"></i>
                    </span>
                    <span>Er du en tester? Trykk her</span>
                </NavLink>

                <NavLink class="menu-link" href="/support" @onclick="CloseMenu">
                    <span class="menu-icon">
                        <i class="bi bi-headset menu-icon"></i>
                    </span>
                    <span>@Localizer["Header_Menu_Support"]</span>
                </NavLink>

                <NavLink class="menu-link" href="/privacy" @onclick="CloseMenu">
                    <span class="menu-icon">
                        <i class="bi bi-shield-lock-fill menu-icon"></i>
                    </span>
                    <span>@Localizer["Header_Menu_Privacy"]</span>
                </NavLink>
            </div>

            
        </nav>
    </div>
</header>

@code {
    [Parameter]
    public string LogoPath { get; set; } = "/images/logo.png";

    [Parameter]
    public string LogoAlt { get; set; } = "Lyn Logo";

    [Parameter]
    public string Title { get; set; } = "Lyn Password Generator";

    [Parameter]
    public string Subtitle { get; set; } = "Secure and Simple Deterministic Password Generator";

    private bool _isMenuCollapsed = true;

    private string MenuCssClass => _isMenuCollapsed ? "menu-overlay" : "menu-overlay show";

    private void ToggleMenu() => _isMenuCollapsed = !_isMenuCollapsed;
    
    private void CloseMenu() => _isMenuCollapsed = true;
}